# Useful Bash tips

## Pacman

### Reset pacman lock file

This can happen when something goes wrong when installing a package. The pacman lock file remains stuck. To unlock remove the lock file.

```
  sudo rm /var/lib/pacman/db.lck
```

## Grep

### Recursive search through folder

```
grep -rni "string" *
```

where,

r = recursive i.e, search subdirectories within the current directory
n = to print the line numbers to stdout
i = case insensitive search 

## ImageMagick

### Convert `.jpeg` to `.png` and vice verse

```
magick convert rose.jpg rose.png
```

### Compress .jpeg file

```
magick "input.jpg" -strip -interlace Plane -gaussian-blur 0.05 -quality 85% "output.jpg"
```

### Compress every .jpg file in directory

```
for file in ./*              
	do
		magick "$file" -strip -interlace Plane -gaussian-blur 0.05 -quality 85% "$file"
		count=$(( $count + 1 ))
		echo "Compressed $file, total compressed $count files"
	done
```